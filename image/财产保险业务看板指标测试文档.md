### 一、测试准备
**数据准备：** 在测试环境中准备一组包含投保、核保、保单、理赔等各环节的完整业务数据。数据应覆盖正常业务流程以及一些特殊场景，如核保拒保、理赔拒赔、多次续保等。
**测试环境：** 搭建与实际业务环境一致的测试环境，包括数据库、应用程序等，并确保测试环境的稳定性和可重复性。
### 二、测试内容与步骤
**保费收入测试：**
**测试 SQL：** 执行按日、七日、月、年统计保费收入的 SQL 语句。
**测试步骤：**
验证 SQL 执行成功，返回结果字段正确，包括日期和保费收入金额。
检查结果数据是否与预期内的保费收入相符，例如每日累加的金额应随业务增加而递增。
对于七日统计，确认结果包含了最近七天的数据，并且前一天的数据不重叠。
月度和年度统计需验证每个时间段的数据聚合正确，如年度统计应为各月保费收入之和。
预期结果：不同时间维度的保费收入统计结果准确无误，数据趋势符合业务实际。
**理赔金额测试：** 
**测试 SQL：** 运行按日、七日、月、年统计理赔金额的 SQL。
**测试步骤：** 
确保 SQL 正常执行，结果中包含日期和理赔金额字段。
核对结果中的理赔金额与实际支付记录一致，如核对某个日期的理赔支付总金额与明细账单相符。
七日统计需确认未遗漏当天数据，且跨月时月份划分正确。
比较月度和年度统计的总和与明细数据的总和，确保两者相等。
预期结果：各时间维度的理赔金额统计结果准确，能正确反映实际赔付金额。
**理赔率测试：**
**测试 SQL：** 执行计算理赔率的 SQL，对比保费收入和理赔金额。
**测试步骤：**
确保 SQL 逻辑中总保费收入和理赔金额的计算正确，无数据类型或日期范围错误。
验证理赔率计算公式是否正确，即理赔金额除以保费收入乘以 100%。
比较每日、七日、月、年不同时间维度的理赔率，确保计算结果与手工核算结果一致。
检查理赔率是否在合理范围内，如 50% 左右，在特殊业务场景下可能出现异常值。
**预期结果：** 理赔率计算结果正确，不同时间维度的理赔率波动趋势合理。
**新增投保测试：**
**测试 SQL：** 运行按日、七日、月、年统计新增投保数量的 SQL。
**测试步骤：**
确认 SQL 查询条件正确，如日期范围、投保状态等。
核对结果中的每日新增投保数量与实际日志中投保申请的数量一致。
七日统计需验证每个日期的新投保数量累加正确，且数据不缺失。
月度和年度统计需验证总投保数量等于每个周期内的累计值。
**预期结果：** 各时间维度的新投保存量统计准确，能真实体现业务拓展动态。
**有效保单测试：**
**测试 SQL：** 执行统计有效保单数的 SQL。
**测试步骤：**
确认 SQL 查询条件中保单状态为 “正常生效” 且未到失效日期。
比较实际有效保单清单（根据保单信息表筛选）与 SQL 查询结果数量一致。
验证保单数量随时间变化趋势，如随着时间推移，若没有大量退保或到期，数量应保持稳定或缓慢增长。
**预期结果：** 有效保单数统计结果正确，与业务记录相符。
**投保转化率测试：**
**测试 SQL：** 运行计算投保转化率的 SQL，对比核保通过后生成保单的数量与总投保申请数量。
**测试步骤：**
确保 SQL 中的核保通过和生成保单的逻辑正确，如筛选核保结果为 “通过” 且保单状态为 “正常生效”。
核对结果中的转化率与实际记录相符，如某日有 100 个投保申请，核保通过 80 个，生成保单 75 个，则转化率为 75/100=75%。
检查统计周期内转化率的波动是否正常，了解业务流程各环节效率变化情况。
**预期结果：** 投保转化率计算结果准确，能反映不同时间段业务流程效率。
**续保率测试：**
**测试 SQL：** 执行计算续保率的 SQL，对比选择续保的保单数量与应续保保单数量。
**测试步骤：**
确认 SQL 查询条件中去重保单的判决有效，能够正确统计到应续保和已续保保单。
计算手工统计的续保率并与 SQL 结果对比，如一个月内应续保保单 150 个，实际续保 100 个，续保率为 66.67%。
分析续保率波动趋势，了解客户需求变化对业务的长期影响。
**预期结果：** 续保率统计结果准确，能真实反映客户留存和业务长期服务市场的能力。
### 三、测试记录
**测试 SQL：** 如保费收入按日统计 SQL 等。
**测试日期：** 从 2024-01-01 至 2024-01-31
**测试人员：** 测试工程师 A、数据分析员 B
**测试结果：** 各指标测试通过，与业务逻辑和预期数据一致，未发现明显错误。